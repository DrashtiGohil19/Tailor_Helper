/*! For license information please see 598.b53f305f.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunktailor_desk=self.webpackChunktailor_desk||[]).push([[598],{5598:function(e,t,r){r.r(t),r.d(t,{default:function(){return p}});var n=r(4942),a=r(1413),i=r(4165),s=r(5861),o=r(9439),l=r(390),c=r(2395),d=r(4066),u=r(9134),h=r(17),m=r(2559),f=(r(7735),r(3948)),v=r(5379),x=(r(6846),r(8067));var p=function(){var e=(0,l.useState)({}),t=(0,o.Z)(e,2),r=t[0],p=t[1],y=(0,l.useState)(""),j=(0,o.Z)(y,2),b=j[0],g=j[1],N=(0,l.useState)({customername:"",bill_nu:"",shirt_qty:0,pent_qty:0,kurta_qty:0,paid_amt:0,booking_date:"",delivery_date:""}),_=(0,o.Z)(N,2),w=_[0],k=_[1],Z=(0,l.useState)(0),L=(0,o.Z)(Z,2),q=L[0],S=L[1],E=(0,l.useState)(0),O=(0,o.Z)(E,2),C=O[0],I=O[1],A=(0,l.useState)(0),P=(0,o.Z)(A,2),G=P[0],D=P[1],T=(0,l.useState)(),B=(0,o.Z)(T,2),F=B[0],M=B[1],z=(0,l.useState)({}),Y=(0,o.Z)(z,2),K=Y[0],Q=Y[1],R=(0,l.useState)(),W=(0,o.Z)(R,2),$=W[0],H=W[1],J=(0,l.useState)(!0),U=(0,o.Z)(J,2),V=U[0],X=U[1],ee=(0,l.useState)(!1),te=(0,o.Z)(ee,2),re=te[0],ne=te[1],ae=localStorage.getItem("token"),ie=function(){var e=(0,s.Z)((0,i.Z)().mark((function e(){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.Z.get("/bill/bill_data?mobilenu=".concat(b,"&userId=").concat(x.xS),{headers:{Authorization:ae}}).then((function(e){null!==e.data.data&&(k(e.data.data),M(e.data.data._id))})).catch((function(e){}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),se=q+C+G,oe=w.paid_amt?se-w.paid_amt:se;(0,l.useEffect)((function(){u.Z.get("/customer/ratecustomer?userId=".concat(x.xS)).then((function(e){p(e.data)})).catch((function(e){})),ie(),document.title="Simplex Tailor - Bill Page"}),[b,F]);var le=function(e){var t=e.target,i=t.name,s=t.value;k((function(e){return(0,a.Z)((0,a.Z)({},e),{},(0,n.Z)({},i,s))})),"shirt_qty"===i?S(parseInt(s)*r.shirt_rate):"pent_qty"===i?I(parseInt(s)*r.pent_rate):"kurta_qty"===i&&D(parseInt(s)*r.kurta_rate)};return(0,m.jsxs)("div",{children:[(0,m.jsx)(c.Z,{}),(0,m.jsx)(d.Z,{}),(0,m.jsxs)("div",{className:"content-wrapper",children:[(0,m.jsx)("section",{className:"content-header",children:(0,m.jsx)("div",{className:"container-fluid",children:(0,m.jsx)("div",{className:"row mb-2",children:(0,m.jsx)("div",{className:"col-sm-6",children:(0,m.jsx)("h1",{children:"Generate Bill"})})})})}),(0,m.jsx)("section",{className:"content measurement",children:(0,m.jsxs)("div",{className:"container-fluid pb-2",children:[(0,m.jsx)("div",{className:"row",children:(0,m.jsx)("div",{className:"col-md-12",children:(0,m.jsx)("div",{className:"card",children:(0,m.jsx)("div",{className:"card-body",children:(0,m.jsxs)("div",{className:"row",children:[(0,m.jsx)(f.Z,{sm:4,xs:6,md:4,children:(0,m.jsxs)("div",{className:"form-group",children:[(0,m.jsx)("label",{children:"Name"}),(0,m.jsx)("input",{type:"text",className:"form-control",readOnly:!0,value:w.customername,onChange:le})]})}),(0,m.jsx)(f.Z,{sm:4,xs:6,md:4,children:(0,m.jsxs)("div",{className:"form-group",children:[(0,m.jsx)("label",{children:"Mobile Number"}),(0,m.jsx)("input",{type:"number",className:"form-control ".concat(K.mobilenu?"is-invalid":""),placeholder:"Enter ...",name:"mobilenu",value:b,onChange:function(e){return g(e.target.value)}}),K.mobilenu&&(0,m.jsx)("p",{className:"invalid-feedback",children:K.mobilenu})]})}),(0,m.jsx)(f.Z,{sm:4,xs:6,md:4,children:(0,m.jsxs)("div",{className:"form-group",children:[(0,m.jsx)("label",{children:"Bill No"}),(0,m.jsx)("input",{type:"number",className:"form-control",readOnly:!0,value:w.bill_nu,onChange:le})]})}),(0,m.jsx)(f.Z,{sm:4,xs:6,md:4,children:(0,m.jsxs)("div",{className:"form-group",children:[(0,m.jsx)("label",{children:"Booking Date"}),(0,m.jsx)("input",{type:"date",className:"form-control ".concat(K.booking_date?"is-invalid":""),placeholder:"Enter ...",name:"booking_date",value:w.booking_date,onChange:le}),K.booking_date&&(0,m.jsx)("p",{className:"invalid-feedback",children:K.booking_date})]})}),(0,m.jsx)(f.Z,{sm:4,xs:6,md:4,children:(0,m.jsxs)("div",{className:"form-group",children:[(0,m.jsx)("label",{children:"Delivery Date"}),(0,m.jsx)("input",{type:"date",className:"form-control ".concat(K.delivery_date?"is-invalid":""),placeholder:"Enter ...",name:"delivery_date",value:w.delivery_date,onChange:le}),K.delivery_date&&(0,m.jsx)("div",{className:"invalid-feedback",children:K.delivery_date})]})})]})})})})}),(0,m.jsx)("div",{className:"row",children:(0,m.jsx)("div",{className:"col-md-12",children:(0,m.jsxs)("div",{className:"card card-primary",children:[(0,m.jsx)("div",{className:"card-header",children:(0,m.jsx)("h3",{className:"card-title",children:"Bill Details"})}),(0,m.jsx)("div",{className:"card-body table-responsive",children:(0,m.jsxs)("table",{id:"example2",className:"table table-bordered table-hover text-center responsive",children:[(0,m.jsx)("thead",{children:(0,m.jsxs)("tr",{children:[(0,m.jsx)("th",{children:"No."}),(0,m.jsx)("th",{className:"w-50",children:"Item Name"}),(0,m.jsx)("th",{className:"w-25",children:"Quantity"}),(0,m.jsx)("th",{children:"Rate"}),(0,m.jsx)("th",{children:"Amount"})]})}),(0,m.jsxs)("tbody",{children:[(0,m.jsxs)("tr",{children:[(0,m.jsx)("td",{children:"1"}),(0,m.jsx)("td",{children:"Shirt"}),(0,m.jsx)("td",{children:(0,m.jsx)("div",{className:"d-flex justify-content-center",children:(0,m.jsx)("input",{type:"text",className:"w-50 form-control form-control-sm text-center",name:"shirt_qty",value:w.shirt_qty,onChange:le})})}),(0,m.jsx)("td",{children:r.shirt_rate}),(0,m.jsx)("td",{children:q||0})]}),(0,m.jsxs)("tr",{children:[(0,m.jsx)("td",{children:"2"}),(0,m.jsx)("td",{children:"Pent"}),(0,m.jsx)("td",{children:(0,m.jsx)("div",{className:"d-flex justify-content-center",children:(0,m.jsx)("input",{type:"text",className:"form-control w-50 form-control-sm text-center",name:"pent_qty",value:w.pent_qty,onChange:le})})}),(0,m.jsx)("td",{children:r.pent_rate}),(0,m.jsx)("td",{children:C||0})]}),(0,m.jsxs)("tr",{children:[(0,m.jsx)("td",{children:"3"}),(0,m.jsx)("td",{children:"Kurta"}),(0,m.jsx)("td",{children:(0,m.jsx)("div",{className:"d-flex justify-content-center",children:(0,m.jsx)("input",{type:"text",className:"w-50 form-control form-control-sm text-center",name:"kurta_qty",value:w.kurta_qty,onChange:le})})}),(0,m.jsx)("td",{children:r.kurta_rate}),(0,m.jsx)("td",{children:G||0})]})]})]})})]})})}),(0,m.jsx)("div",{className:"card",children:(0,m.jsx)("div",{className:"card-body",children:(0,m.jsxs)("div",{className:"row",children:[(0,m.jsx)(f.Z,{sm:4,xs:4,md:2,children:(0,m.jsxs)("div",{className:"form-group",children:[(0,m.jsx)("label",{children:"Total Amount"}),(0,m.jsx)("input",{type:"text",className:"form-control",value:0===se?0:se})]})}),(0,m.jsx)(f.Z,{sm:4,xs:4,md:2,children:(0,m.jsxs)("div",{className:"form-group",children:[(0,m.jsx)("label",{children:"Paid Amount"}),(0,m.jsx)("input",{type:"number",className:"form-control",name:"paid_amt",value:w.paid_amt,onChange:le})]})}),(0,m.jsx)(f.Z,{sm:4,xs:4,md:2,children:(0,m.jsxs)("div",{className:"form-group",children:[(0,m.jsx)("label",{children:"Final Amount"}),(0,m.jsx)("input",{type:"text",className:"form-control",value:oe||0})]})})]})})}),(0,m.jsxs)("div",{className:"m-2",children:[(0,m.jsx)("button",{className:"btn btn-primary mr-3",type:"submit",onClick:function(e){e.preventDefault();var t={};w.shirt_qty>0&&(t.shirt={shirt_qty:w.shirt_qty,shirt_amt:q}),w.pent_qty>0&&(t.pent={pent_qty:w.pent_qty,pent_amt:C}),w.kurta_qty>0&&(t.kurta={kurta_qty:w.kurta_qty,kurta_amt:G}),function(){var e=!0,t={};return""===b.trim()?(t.mobilenu="Mobile number is required",e=!1):/^\d{10}$/.test(b)?""!==b.trim()&&(t.mobilenu=""):(t.mobilenu="Mobile number should be a 10-digit number",e=!1),w.booking_date||(t.booking_date="Booking date is required",e=!1),new Date(w.delivery_date)<=new Date(w.booking_date)?(t.delivery_date="Delivery date must be after booking date",e=!1):w.delivery_date||(t.delivery_date="Delivery date is required",e=!1),0===w.shirt_qty&&0===w.pent_qty&&0===w.kurta_qty&&(t.qty="At least one quantity is required",e=!1),Q(t),e}()&&u.Z.post("/bill/add_bill",(0,a.Z)({customer_id:F,bill_date:w.bill_date,booking_date:w.booking_date,delivery_date:w.delivery_date,total_amt:se,paid_amt:w.paid_amt||0,final_amt:oe},t),{headers:{Authorization:ae}}).then((function(e){H(e.data.data.customer_id),X(!1),"success"===e.data.status&&h.Am.success("Saved Succesfully !",{autoClose:4e3,style:{backgroundColor:"black",color:"white"}})})).catch((function(e){h.Am.error("Failed to save !",{autoClose:4e3,style:{backgroundColor:"black",color:"white"}})}))},children:"Save"}),(0,m.jsx)("button",{className:"btn btn-primary",disabled:V,onClick:function(){return ne(!0)},children:"Get Print"})]})]})})]}),(0,m.jsx)("div",{className:"d-none",children:(0,m.jsx)(v.Z,{customer_id:$,print:re})})]})}},8067:function(e,t,r){r.d(t,{As:function(){return i},r:function(){return a},xS:function(){return n}});var n=localStorage.getItem("userId"),a=localStorage.getItem("token"),i=localStorage.getItem("shopName")},2395:function(e,t,r){r.d(t,{Z:function(){return o}});var n=r(5400),a=r(749),i=r(8067),s=r(2559);function o(){return(0,s.jsx)("div",{className:"wrapper",children:(0,s.jsxs)("aside",{className:"main-sidebar sidebar-dark-primary elevation-4",children:[(0,s.jsxs)(n.OL,{className:"brand-link",activeclassname:"active-link",children:[(0,s.jsx)("img",{src:"/images/cap.png",className:"brand-image img-circle",style:{opacity:".8"}}),(0,s.jsx)("span",{className:"brand-text font-weight-light text-uppercase",children:(0,s.jsx)("b",{children:i.As})}),(0,s.jsx)("i",{"data-widget":"pushmenu",className:"d-lg-none ml-2",children:(0,s.jsx)(a.dL9,{})})]}),(0,s.jsx)("div",{className:"sidebar",children:(0,s.jsx)("nav",{className:"mt-3",children:(0,s.jsxs)("ul",{className:"nav nav-pills nav-sidebar flex-column",children:[(0,s.jsx)("li",{className:"nav-item",children:(0,s.jsxs)(n.OL,{to:"/dashboard",className:"nav-link",children:[(0,s.jsx)("i",{className:"nav-icon fas fa-tachometer-alt"}),(0,s.jsx)("p",{children:"Dashboard"})]})}),(0,s.jsx)("li",{className:"nav-item",children:(0,s.jsxs)(n.OL,{to:"/allworker",className:"nav-link",children:[(0,s.jsx)("i",{className:"nav-icon fas fa-th"}),(0,s.jsx)("p",{children:"Worker"})]})}),(0,s.jsx)("li",{className:"nav-item",children:(0,s.jsxs)(n.OL,{to:"/customer_list",className:"nav-link",children:[(0,s.jsx)("i",{className:"nav-icon fas fa-user"}),(0,s.jsx)("p",{children:"Customer"})]})}),(0,s.jsx)("li",{className:"nav-item",children:(0,s.jsxs)(n.OL,{to:"/bill",className:"nav-link",children:[(0,s.jsx)(a.t9y,{className:"nav-icon"}),(0,s.jsx)("p",{children:"Generate Bill"})]})})]})})})]})})}},4066:function(e,t,r){r.d(t,{Z:function(){return i}});var n=r(5545),a=r(2559);function i(){var e=(0,n.s0)();return(0,a.jsxs)("nav",{className:"main-header navbar navbar-expand navbar-white navbar-light",children:[(0,a.jsx)("ul",{className:"navbar-nav",children:(0,a.jsx)("li",{className:"nav-item",children:(0,a.jsx)("a",{className:"nav-link","data-widget":"pushmenu",href:"#",role:"button",children:(0,a.jsx)("i",{className:"fas fa-bars"})})})}),(0,a.jsxs)("ul",{className:"navbar-nav ml-auto",children:[(0,a.jsx)("li",{className:"nav-item",children:(0,a.jsx)("a",{className:"nav-link","data-widget":"fullscreen",href:"#",role:"button",children:(0,a.jsx)("i",{className:"fas fa-expand-arrows-alt"})})}),(0,a.jsx)("li",{className:"nav-item",children:(0,a.jsx)("a",{className:"nav-link",onClick:function(){localStorage.removeItem("token"),e("/")},role:"button",children:(0,a.jsx)("i",{className:"fas fa-power-off"})})})]})]})}},5861:function(e,t,r){function n(e,t,r,n,a,i,s){try{var o=e[i](s),l=o.value}catch(c){return void r(c)}o.done?t(l):Promise.resolve(l).then(n,a)}function a(e){return function(){var t=this,r=arguments;return new Promise((function(a,i){var s=e.apply(t,r);function o(e){n(s,a,i,o,l,"next",e)}function l(e){n(s,a,i,o,l,"throw",e)}o(void 0)}))}}r.d(t,{Z:function(){return a}})},4165:function(e,t,r){r.d(t,{Z:function(){return a}});var n=r(1002);function a(){a=function(){return t};var e,t={},r=Object.prototype,i=r.hasOwnProperty,s=Object.defineProperty||function(e,t,r){e[t]=r.value},o="function"==typeof Symbol?Symbol:{},l=o.iterator||"@@iterator",c=o.asyncIterator||"@@asyncIterator",d=o.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,r){return e[t]=r}}function h(e,t,r,n){var a=t&&t.prototype instanceof j?t:j,i=Object.create(a.prototype),o=new C(n||[]);return s(i,"_invoke",{value:q(e,r,o)}),i}function m(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=h;var f="suspendedStart",v="suspendedYield",x="executing",p="completed",y={};function j(){}function b(){}function g(){}var N={};u(N,l,(function(){return this}));var _=Object.getPrototypeOf,w=_&&_(_(I([])));w&&w!==r&&i.call(w,l)&&(N=w);var k=g.prototype=j.prototype=Object.create(N);function Z(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function L(e,t){function r(a,s,o,l){var c=m(e[a],e,s);if("throw"!==c.type){var d=c.arg,u=d.value;return u&&"object"==(0,n.Z)(u)&&i.call(u,"__await")?t.resolve(u.__await).then((function(e){r("next",e,o,l)}),(function(e){r("throw",e,o,l)})):t.resolve(u).then((function(e){d.value=e,o(d)}),(function(e){return r("throw",e,o,l)}))}l(c.arg)}var a;s(this,"_invoke",{value:function(e,n){function i(){return new t((function(t,a){r(e,n,t,a)}))}return a=a?a.then(i,i):i()}})}function q(t,r,n){var a=f;return function(i,s){if(a===x)throw new Error("Generator is already running");if(a===p){if("throw"===i)throw s;return{value:e,done:!0}}for(n.method=i,n.arg=s;;){var o=n.delegate;if(o){var l=S(o,n);if(l){if(l===y)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(a===f)throw a=p,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);a=x;var c=m(t,r,n);if("normal"===c.type){if(a=n.done?p:v,c.arg===y)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(a=p,n.method="throw",n.arg=c.arg)}}}function S(t,r){var n=r.method,a=t.iterator[n];if(a===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,S(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var i=m(a,t.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,y;var s=i.arg;return s?s.done?(r[t.resultName]=s.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,y):s:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function E(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function O(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function C(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(E,this),this.reset(!0)}function I(t){if(t||""===t){var r=t[l];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,s=function r(){for(;++a<t.length;)if(i.call(t,a))return r.value=t[a],r.done=!1,r;return r.value=e,r.done=!0,r};return s.next=s}}throw new TypeError((0,n.Z)(t)+" is not iterable")}return b.prototype=g,s(k,"constructor",{value:g,configurable:!0}),s(g,"constructor",{value:b,configurable:!0}),b.displayName=u(g,d,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,u(e,d,"GeneratorFunction")),e.prototype=Object.create(k),e},t.awrap=function(e){return{__await:e}},Z(L.prototype),u(L.prototype,c,(function(){return this})),t.AsyncIterator=L,t.async=function(e,r,n,a,i){void 0===i&&(i=Promise);var s=new L(h(e,r,n,a),i);return t.isGeneratorFunction(r)?s:s.next().then((function(e){return e.done?e.value:s.next()}))},Z(k),u(k,d,"Generator"),u(k,l,(function(){return this})),u(k,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=I,C.prototype={constructor:C,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(O),!t)for(var r in this)"t"===r.charAt(0)&&i.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(n,a){return o.type="throw",o.arg=t,r.next=n,a&&(r.method="next",r.arg=e),!!a}for(var a=this.tryEntries.length-1;a>=0;--a){var s=this.tryEntries[a],o=s.completion;if("root"===s.tryLoc)return n("end");if(s.tryLoc<=this.prev){var l=i.call(s,"catchLoc"),c=i.call(s,"finallyLoc");if(l&&c){if(this.prev<s.catchLoc)return n(s.catchLoc,!0);if(this.prev<s.finallyLoc)return n(s.finallyLoc)}else if(l){if(this.prev<s.catchLoc)return n(s.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return n(s.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&i.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var a=n;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var s=a?a.completion:{};return s.type=e,s.arg=t,a?(this.method="next",this.next=a.finallyLoc,y):this.complete(s)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),O(r),y}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var a=n.arg;O(r)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:I(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),y}},t}}}]);
//# sourceMappingURL=598.b53f305f.chunk.js.map